<div id="doctorRecommendationsModal" class="modal full" fixed>
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
      <p class="center">
        ##word.Doctor Recommendations##
        <i class="fa fa-pencil"></i>
      </p>
    </div>

    <div class="modal-body">
      <div class="row">
        <div class="col9">
          <fieldset>
            <div class="row">
              <i-checkbox class="col2" ng-model="item.erCase" label="##word.ER Case ?##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.chronic" label="##word.Chronic##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.conginital" label="##word.Conginital##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.rta" label="##word.RTA##"></i-checkbox>
              <i-checkbox class="col3" ng-model="item.workRelated" label="##word.Work Related##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.vaccination" label="##word.Vaccination##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.checkup" label="##word.Checkup##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.psychiatric" label="##word.Psychiatric##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.infertility" label="##word.Infertility##"></i-checkbox>
              <i-checkbox class="col2" ng-hide="item.patient.gender.id == 'm'" ng-model="item.pregnancy" label="##word.Pregnancy##"></i-checkbox>
              <i-checkbox class="col2" ng-hide="item.patient.gender.id == 'm'" ng-model="item.lactation" label="##word.Lactation##"></i-checkbox>
              <i-checkbox class="col2" ng-model="item.acute" label="##word.Acute##"></i-checkbox>
            </div>
          </fieldset>
          <fieldset>
            <legend>##word.Treatment##</legend>
            <i-content ng-model="item.treatment"></i-content>
          </fieldset>

          <div class="row padding">
            <div class="tabs">
              <div class="tabs-header full">
                <a class="tab-link" onclick="site.showTabContent(event, '#doctor')">
                  <span> ##word.Doctor## + </span>
                </a>

                <a class="tab-link" onclick="site.showTabContent(event, '#patient')">
                  <span> ##word.Patient## + </span>
                </a>

                <a class="tab-link" onclick="site.showTabContent(event, '#orders')">
                  <span> ##word.Orders## + </span>
                </a>
              </div>
              <div class="tabs-content">
                <div id="doctor" class="tab-content">
                  <div class="row padding">
                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Chief Complaint##"
                          class="col10"
                          ng-model="item.$chiefComplaint"
                          display="name##session.lang##"
                          items="chiefComplaintsList"
                          ng-search="item.$chiefComplaint"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addDoctorReccomend('$chiefComplaint','CC')"></i-button>
                        </div>
                      </div>
                    </div>

                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Significant Sign##"
                          class="col10"
                          ng-model="item.$significantSign"
                          display="name##session.lang##"
                          items="significantSignsList"
                          ng-search="item.$significantSign"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addDoctorReccomend('$significantSign','SS')"></i-button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row padding">
                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Other Condition##"
                          class="col10"
                          ng-model="item.$otherCondition"
                          display="name##session.lang##"
                          items="otherConditionsList"
                          ng-search="item.$otherCondition"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addDoctorReccomend('$otherCondition','OC')"></i-button>
                        </div>
                      </div>
                    </div>

                    <div class="col6">
                      <div class="row">
                        <i-list label="##word.diagnoses##" class="col10" ng-model="item.$diagnosis" display="name##session.lang##" items="diagnosesList" ng-search="item.$diagnosis"></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addDoctorReccomend('$diagnosis','DIAG')"></i-button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row list" ng-repeat="s in item.doctorReccomendList">
                    <div class="col1 code-list">
                      <p>{{s.code}}</p>
                    </div>
                    <div class="col10">
                      <p class="bold">{{s.name##session.lang##}}</p>
                    </div>

                    <div class="col1">
                      <i-button type="delete default" ng-click="item.doctorReccomendList.splice($index,1)"> </i-button>
                    </div>
                  </div>
                </div>

                <div id="patient" class="tab-content">
                  <div class="row padding">
                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Patient Recommendations##"
                          class="col10"
                          ng-model="item.$patientRecommendation"
                          display="name##session.lang##"
                          items="patientRecommendationsList"
                          ng-search="item.$patientRecommendation"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addPatientReccomend('$patientRecommendation','PR')"></i-button>
                        </div>
                      </div>
                    </div>

                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Patient Educations##"
                          class="col10"
                          ng-model="item.$patientEducation"
                          display="name##session.lang##"
                          items="patientEducationsList"
                          ng-search="item.$patientEducation"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addPatientReccomend('$patientEducation','PE')"></i-button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row padding">
                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Recommended Foods##"
                          class="col10"
                          ng-model="item.$recommendedFood"
                          display="name##session.lang##"
                          items="foodsList"
                          ng-search="item.$recommendedFood"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addPatientReccomend('$recommendedFood','RF')"></i-button>
                        </div>
                      </div>
                    </div>

                    <div class="col6">
                      <div class="row">
                        <i-list label="##word.Forbidden Foods##" class="col10" ng-model="item.$forbiddenFood" display="name##session.lang##" items="foodsList" ng-search="item.$forbiddenFood"></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addPatientReccomend('$forbiddenFood','FF')"></i-button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row padding">
                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Recommended Drinks##"
                          class="col10"
                          ng-model="item.$recommendedDrink"
                          display="name##session.lang##"
                          items="drinksList"
                          ng-search="item.$recommendedDrink"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addPatientReccomend('$recommendedDrink','RD')"></i-button>
                        </div>
                      </div>
                    </div>

                    <div class="col6">
                      <div class="row">
                        <i-list
                          label="##word.Forbidden Drinks##"
                          class="col10"
                          ng-model="item.$forbiddenDrink"
                          display="name##session.lang##"
                          items="drinksList"
                          ng-search="item.$forbiddenDrink"
                        ></i-list>
                        <div class="col2">
                          <br />
                          <i-button type="add" ng-click="addPatientReccomend('$forbiddenDrink','FD')"></i-button>
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="row list" ng-repeat="s in item.patientReccomendList">
                    <div class="col1 code-list">
                      <p>{{s.code}}</p>
                    </div>
                    <div class="col10">
                      <p class="bold">{{s.name##session.lang##}}</p>
                    </div>
                    <div class="col1">
                      <i-button type="delete default" ng-click="item.patientReccomendList.splice($index,1)"> </i-button>
                    </div>
                  </div>
                </div>
                <div id="orders" class="tab-content">
                  <div class="row">
                    <i-list label="##word.Order##" class="col6" ng-model="item.$order" display="name##session.lang##" items="ordersList" ng-get="getOrdersList($search)"></i-list>
                    <div class="col6">
                      <br />
                      <div class="row">
                        <i-button type="add" ng-click="addOrders(item)"></i-button>
                        <i title="##word.Consultation##" class="fas fa-user-md icon" id="CO" ng-click="item.$groupTypeId = 2 ; item.$orderType = 'CO' ;getOrdersList('')"></i>
                        <i title="##word.Laboratory##" class="fas fa-vial icon" id="LA" ng-click="item.$groupTypeId = 3 ;item.$orderType = 'LA' ;getOrdersList('')"></i>
                        <i title="##word.Radiology##" class="fas fa-x-ray icon" id="X-R" ng-click="item.$groupTypeId = 4 ;item.$orderType = 'X-R' ;getOrdersList('')"></i>
                        <i title="##word.Medicine##" class="fas fa-capsules icon" id="MD" ng-click="item.$orderType = 'MD' ;getOrdersList('')"></i>
                      </div>
                    </div>
                  </div>
                  <div class="row list" ng-repeat="s in item.ordersList">
                    <div class="row">
                      <div class="col2">
                        <br />
                        <p class="code-list">
                          <i class="fas fa-user-md" ng-show="s.type== 'CO'"></i>
                          <i class="fas fa-vial" ng-show="s.type== 'LA'"></i>
                          <i class="fas fa-x-ray" ng-show="s.type== 'X-R'"></i>
                          <i class="fas fa-capsules" ng-show="s.type== 'MD'"></i>
                          {{s.type}}-{{s.code}}
                        </p>
                      </div>
                      <div class="col4">
                        <br />
                        <p class="bold">{{s.name##session.lang##}}</p>
                      </div>
                      <div class="col6">
                        <div class="row">
                          <i-control type="number" ng-change="calc(s)" ng-show="s.type == 'MD'" class="col3" label="##word.QTY.##" ng-model="s.count"></i-control>
                          <div class="col3">
                            <p class="bold center">##word.Price##</p>
                            <p class="bold center">{{s.price || 0}}</p>
                          </div>
                          <div class="col3">
                            <p class="bold center">##word.Disc##</p>
                            <p class="bold center">
                              {{s.discount || 0}}
                              <span class="currency" ng-show="discountType == 'value'">##$##</span>
                              <span class="currency" ng-show="discountType == 'percent'">##%##</span>
                            </p>
                          </div>
                          <div class="col3">
                            <p class="bold center">##word.Total##</p>
                            <p class="bold center">{{s.total || 0}}</p>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="row" ng-show="s.type == 'MD'">
                      <i-list
                        label="##word.Duration##"
                        class="col3"
                        ng-model="s.medicineDuration"
                        display="name##session.lang##"
                        items="medicineDurationsList"
                        ng-search="s.$medicineDuration"
                      ></i-list>
                      <i-list
                        label="##word.Frequency##"
                        class="col3"
                        ng-model="s.medicineFrequency"
                        display="name##session.lang##"
                        items="medicineFrequenciesList"
                        ng-search="s.$medicineFrequency"
                      ></i-list>

                      <i-list label="##word.Route##" class="col3" ng-model="s.medicineRoute" display="name##session.lang##" items="medicineRoutesList" ng-search="s.$medicineRoute"></i-list>
                    </div>
                    <div class="row">
                      <i-control class="col10" ng-model="s.notes" label="##word.Notes##"></i-control>
                      <div class="col1"></div>
                      <div class="col1">
                        <br />
                        <i-button type="delete default" ng-click="item.ordersList.splice($index,1)"> </i-button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col3">
          <fieldset>
            <legend>##word.Patient##</legend>
            <img class="img-logo" ng-src="{{item.patient.image.url}}" alt="" />
            <p class="bold">{{item.patient.fullName##session.lang##}} ( <span class="blue">{{item.patient.code}}</span> )</p>
            <p class="bold">{{item.mainInsuranceCompany.name##session.lang##}} ( <span class="blue">{{item.mainInsuranceCompany.code}}</span> )</p>
            <p class="bold">##word.Class## : {{item.patient.insuranceClass.name##session.lang##}}</p>
            <p class="bold brown">##word.EXP## : {{item.patient.expiryDate | date:"dd / MM / yyyy"}}</p>
            <p class="bold blue">{{item.patient.mobile}}</p>
            <p class="bold">{{item.patient.nationality.name##session.lang##}} <img class="img-logo" ng-src="{{item.patient.nationality.image.url}}" alt="" /></p>
            <p class="bold">##word.Age## : {{item.patient.age}}Y</p>
          </fieldset>
          <fieldset>
            <legend>##word.Vitals Notes##</legend>
            <div class="row">
              <i-control type="text" label="##word.Height## / CM" ng-model="item.Height"></i-control>
              <i-control type="text" label="##word.Weight## / KG" ng-model="item.weight"></i-control>
              <i-control type="text" label="##word.Temperature##" ng-model="item.temperature"></i-control>
              <i-control type="text" label="##word.Pulse##" ng-model="item.pulse"></i-control>
              <i-control type="text" label="##word.Blood Pressure High##" ng-model="item.bloodPressureHigh"></i-control>
              <i-control type="text" label="##word.Blood Pressure Low##" ng-model="item.bloodPressureLow"></i-control>
              <i-control type="text" label="##word.Respiratory Rate##" ng-model="item.respiratoryRate"></i-control>
              <i-control type="text" label="##word.Oxygen Saturation##" ng-model="item.oxygenSaturation"></i-control>
              <i-control type="text" label="##word.BMI##" ng-model="item.bmi"></i-control>
              <i-control type="text" label="##word.FBS##" ng-model="item.fbs"></i-control>
              <i-control type="text" label="##word.Rbs##" ng-model="item.rbs"></i-control>
              <i-textarea label="##word.notes##" ng-model="item.notesAfter"></i-textarea>
            </div>
          </fieldset>
        </div>
      </div>
    </div>

    <div class="modal-footer center">
      <p class="error">{{error}}</p>
      <i-button
        type="edit"
        ng-hide="mode == 'view'|| item.$view || item.hasOrder || item.hasSales"
        label="##word.Save##"
        x-permissions="doctorDeskTopUpdate || doctorDeskTopManage"
        ng-click="update(item,'#doctorRecommendationsModal')"
      ></i-button>
      <i-button
        type="save"
        ng-show="item.status.id == 2 && !item.$view"
        label="##word.Save## ##word.And## ##word.End detection##"
        x-permissions="doctorDeskTopUpdate || doctorDeskTopManage"
        ng-click="update(item,'#doctorRecommendationsModal',3)"
      ></i-button>
      <i-button type="close" label="##word.Close##" onclick="site.hideModal( '#doctorRecommendationsModal')"></i-button>
    </div>
  </div>
</div>
