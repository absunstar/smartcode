<div id="recommendationsModal" class="modal full" fixed>
  <div class="modal-content">
    <div class="modal-header">
      <span class="close">&times;</span>
      <p class="center">
        ##word.Recommendations##
        <i class="fa fa-pencil"></i>
      </p>
    </div>

    <div class="modal-body">
      <div class="row">
        <div class="col9">
          <fieldset>
            <legend>##word.Treatment##</legend>
            <i-content ng-model="item.treatment"></i-content>
          </fieldset>

          <fieldset>
            <legend><i-button type="push" ng-click="item.filesList.push({})"></i-button></legend>
            <div class="row" ng-repeat="f in item.filesList">
              <div class="col10">
                <i-file ng-model="f.file"></i-file>
              </div>
              <div class="col2">
                <i-button type="delete" ng-click="item.filesList.splice($index,1)"> </i-button>
              </div>
            </div>
          </fieldset>

        
        </div>
        <div class="col3">
          <fieldset>
            <legend>##word.Patient##</legend>
            <p class="bold">
              <img class="img-logo" ng-src="{{item.patient.image.url}}" alt="" />
              ({{item.patient.gender.name##session.lang##}})
            </p>
            <p class="bold">{{item.patient.fullName##session.lang##}} ( <span class="blue">{{item.patient.code}}</span> )</p>
            <p class="bold">{{item.mainInsuranceCompany.name##session.lang##}} ( <span class="blue">{{item.mainInsuranceCompany.code}}</span> )</p>
            <p class="bold">##word.Class## : {{item.patient.insuranceClass.name##session.lang##}}</p>
            <p class="bold brown">##word.EXP## : {{item.patient.expiryDate | date:"dd / MM / yyyy"}}</p>
            <p class="bold blue">{{item.patient.mobile}}</p>
            <p class="bold">{{item.patient.nationality.name##session.lang##}} <img class="img-logo" ng-src="{{item.patient.nationality.image.url}}" alt="" /></p>
            <p class="bold">##word.Age## : {{item.patient.age}}Y</p>
          </fieldset>
          <fieldset>
            <legend>##word.Doctor##</legend>
            <p class="bold">
              <img class="img-logo" ng-src="{{item.doctor.image.url}}" alt="" />
              ( {{item.doctor.gender.name##session.lang##}} )
            </p>
            <p class="bold">{{item.doctor.name##session.lang##}} ( <span class="blue">{{item.doctor.code}}</span> )</p>
            <p class="bold">##word.Mobile## : {{item.doctor.mobile}}</p>
            <p class="bold">##word.Doctor Type## : {{item.doctor.doctorType.name##session.lang##}}</p>
            <p class="bold">##word.Specialty## : {{item.doctor.specialty.name##session.lang##}}</p>
            <p class="bold">{{item.doctor.nationality.name##session.lang##}} <img class="img-logo" ng-src="{{item.doctor.nationality.image.url}}" alt="" /></p>
          </fieldset>

          <fieldset>
            <legend>##word.Laboratory##</legend>
            <p class="bold">##word.Name## : {{item.service.name##session.lang##}}</p>
          </fieldset>
        </div>
      </div>
      <fieldset>
        <legend>##word.Laboratory Details##</legend>

        <table class="table hover bold">
          <tr>
            <th>##word.Test##</th>
            <th>##word.Result##</th>
            <th>##word.Normal Value##</th>
            <th>##word.Errors / Notes##</th>
          </tr>
          <tr ng-repeat="n in item.normalRangeList">
            <td class="center">{{n.name}}</td>
            <td class="center"><i-control ng-model="n.result"></i-control></td>
            <td class="center">{{n.fromValue}} / {{n.toValue}} ({{n.unit}})</td>
            <td class="center"><i-control ng-model="n.notes"></i-control></td>
          </tr>
        </table>
      </fieldset>
    </div>

    <div class="modal-footer center">
      <p class="error">{{error}}</p>
      <i-button
        type="edit"
        ng-hide="mode == 'view'|| item.$view"
        label="##word.Save##"
        x-permissions="laboratoryDeskTopUpdate || laboratoryDeskTopManage"
        ng-click="update(item,'#recommendationsModal')"
      ></i-button>
      <i-button
        type="save"
        ng-show="item.status.id == 3 && !item.$view"
        label="##word.Save## ##word.And## ##word.Put results##"
        x-permissions="laboratoryDeskTopChangeStatus || laboratoryDeskTopManage"
        ng-click="update(item,'#recommendationsModal',4)"
      ></i-button>
      <i-button type="print" x-permissions="laboratoryDeskTopPrint || laboratoryDeskTopManage" label="##word.Label print##" ng-click="labelPrint(item)"></i-button>
      <i-button type="print" x-permissions="laboratoryDeskTopPrint || laboratoryDeskTopManage" label="##word.Laboratory print##" ng-click="laboratoryPrint(item)"></i-button>
      <i-button type="close" label="##word.Close##" onclick="site.hideModal( '#recommendationsModal')"></i-button>
    </div>
  </div>
</div>
